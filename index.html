<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Men√π - Bellinfusto</title>
    <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Roboto', sans-serif; background: #2d2d2d; min-height: 100vh; padding: 40px 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { text-align: center; color: #D4AF37; margin-bottom: 40px; font-size: 3em; font-family: 'Shadows Into Light', cursive; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .loading { text-align: center; color: #D4AF37; font-size: 1.2em; }
        .error { background: #8B4513; color: white; padding: 20px; border-radius: 8px; text-align: center; font-weight: bold; }
        .section { margin-bottom: 50px; }
        .section-title { font-size: 2.2em; color: #D4AF37; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 2px solid #D4AF37; font-family: 'Shadows Into Light', cursive; }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; }
        .product { background: #3d3d3d; border-radius: 12px; padding: 25px; box-shadow: 0 8px 20px rgba(0,0,0,0.4); transition: transform 0.3s ease; display: flex; flex-direction: column; border: 1px solid #555; }
        .product:hover { transform: translateY(-5px); box-shadow: 0 12px 30px rgba(212, 175, 55, 0.3); border-color: #D4AF37; }
        .product-header { display: flex; justify-content: space-between; margin-bottom: 12px; gap: 10px; }
        .product-name { font-size: 1.4em; font-weight: 700; color: #D4AF37; flex: 1; }
        .product-symbols { display: flex; gap: 6px; }
        .symbol { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 0.75em; }
        .symbol.veg { background: #4CAF50; }
        .symbol.vegan { background: #8BC34A; }
        .symbol.spicy { background: #FF6B35; }
        .product-description { font-size: 0.95em; color: #ccc; margin-bottom: 15px; line-height: 1.5; flex-grow: 1; }
        .product-price { font-size: 1.6em; font-weight: bold; color: #D4AF37; margin-bottom: 12px; margin-top: auto; }
        .price-small { color: #D4AF37; }
        .price-large { color: #B8942A; margin-left: 8px; }
        .price-label { font-size: 0.65em; color: #999; display: block; margin-top: 5px; font-weight: normal; }
        .allergens { font-size: 0.85em; color: #aaa; padding-top: 12px; border-top: 1px solid #555; }
        .allergen-label { font-weight: bold; color: #D4AF37; }
        .allergen-codes { color: #FF6B35; font-weight: bold; }
        @media (max-width: 768px) { h1 { font-size: 2em; } .section-title { font-size: 1.6em; } .products-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container"><h1>üçª Men√π Bellinfusto</h1><div id="menu" class="loading">Caricamento men√π...</div></div>
    <script>
const CSV_URL='https://docs.google.com/spreadsheets/d/e/2PACX-1vRVCdwqQen7TOE82kG09jdHmlAXD_WlFry69VYLxPzR0PYuSy62SQqpk490oQhv7C7TvwS0Ho-AxfGj/pub?gid=0&single=true&output=csv';const allergenMap={'1':'Glutine','2':'Crostacei','3':'Uova','4':'Pesce','5':'Arachidi','6':'Frutta a guscio','7':'Latte','8':'Sedano','9':'Mostarda','10':'Sesamo','11':'Molluschi','12':'Soia','13':'Solfiti'};const sectionOrder=['Sfizi e gastronomia','Hamburger','Pinse','Dolci','Bibite','Birre alla spina','Birre in bottiglia'];function parseCSV(t){const e=t.split('\n'),n=e[0].split(',').map(t=>t.trim().replace(/^"|"$/g,'')),r=[];for(let t=1;t<e.length;t++){if(!e[t].trim())continue;const n=[];let r='',s=!1;for(let a=0;a<e[t].length;a++){const i=e[t][a];'"'===i?s=!s:','===i&&!s?(n.push(r.trim().replace(/^"|"$/g,'')),r=''):r+=i}n.push(r.trim().replace(/^"|"$/g,'')),r.push(n)}return{headers:n,rows:r}}async function loadMenu(){try{const t=await fetch(CSV_URL);if(!t.ok)throw new Error(`Errore HTTP: ${t.status}`);const e=await t.text(),{headers:n,rows:r}=parseCSV(e);if(!r||0===r.length)throw new Error('Nessun dato trovato nel foglio');const s=n.indexOf('Sezione'),a=n.indexOf('Nome'),i=n.indexOf('Descrizione'),o=n.indexOf('Prezzo piccolo'),l=n.indexOf('Prezzo grande'),c=n.indexOf('Allergeni'),d=n.indexOf('Veg'),p=n.indexOf('Vegan'),u=n.indexOf('Piccante'),g={};sectionOrder.forEach(t=>{g[t]=[]});for(let t=0;t<r.length;t++){const e=r[t];if(!e[s])continue;const n={sezione:e[s],nome:e[a]||'Senza nome',descrizione:e[i]||'',prezzoPiccolo:parseFloat(e[o])||0,prezzoGrande:e[l]&&e[l].trim()?parseFloat(e[l]):null,allergeni:e[c]&&e[c].trim()?String(e[c]).split(',').map(t=>t.trim()):[],veg:1===parseInt(e[d]),vegan:1===parseInt(e[p]),spicy:1===parseInt(e[u])};g[n.sezione]&&g[n.sezione].push(n)}renderMenu(g)}catch(t){document.getElementById('menu').innerHTML=`<div class="error">Errore nel caricamento: ${t.message}</div>`,console.error(t)}}function renderMenu(t){let e='';sectionOrder.forEach(n=>{const r=t[n];r&&0!==r.length&&(e+=`<div class="section"><h2 class="section-title">${n}</h2><div class="products-grid">`,r.forEach(t=>{e+=renderProduct(t)}),e+='</div></div>')}),document.getElementById('menu').innerHTML=e}function renderProduct(t){let e=`<span class="price-small">‚Ç¨${t.prezzoPiccolo.toFixed(2)}</span>`,n='';null!==t.prezzoGrande&&(e+=` / <span class="price-large">‚Ç¨${t.prezzoGrande.toFixed(2)}</span>`,n='<span class="price-label">Piccolo / Grande</span>');let r='';t.veg&&!t.vegan&&(r+='<span class="symbol veg" title="Vegetariano">V</span>'),t.vegan&&(r+='<span class="symbol vegan" title="Vegano">VV</span>'),t.spicy&&(r+='<span class="symbol spicy" title="Piccante">üå∂</span>');let s='';if(t.allergeni&&t.allergeni.length>0){const e=t.allergeni.map(t=>allergenMap[t]||t).join(', ');s=`<div class="allergens"><span class="allergen-label">Allergeni:</span> <span class="allergen-codes">${e}</span></div>`}return`<div class="product"><div class="product-header"><span class="product-name">${t.nome}</span><div class="product-symbols">${r}</div></div><p class="product-description">${t.descrizione}</p><div class="product-price">${e}${n}</div>${s}</div>`}document.addEventListener('DOMContentLoaded',loadMenu);
    </script>
</body>
</html>
